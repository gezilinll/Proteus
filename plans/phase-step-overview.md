# Phase 与 Step 总览

> 本文档记录所有 Phase 的 Step 分解、验收标准、以及配套文章输出节点。

---

## Phase 1: 基础编辑器（Week 1-4）

**目标**：搭建可用的基础编辑器，验证核心架构。

### Step 分解

| Step | 名称 | 时间 | 验收标准 | 状态 |
|------|------|------|----------|------|
| 1 | 项目基础搭建 | 2天 | `pnpm dev` 正常启动，代码规范检查通过 | ✅ 完成 |
| 2 | 核心数据结构与命令系统 | 2-3天 | Scene CRUD + Undo/Redo 可用，测试覆盖 | ✅ 完成 |
| 3 | 渲染引擎与视口控制 | 3天 | Canvas 显示，可缩放/平移，60fps | ✅ 完成 |
| 4 | Editor 主类与状态管理 | 2天 | Editor 生命周期可用，Zustand 集成 | ✅ 完成 |
| 5 | 基础元素渲染 | 2天 | 矩形/圆形可渲染，支持变换 | ✅ 完成 |
| 6 | 选择与高亮 | 2天 | 点选/框选/多选可用 | ✅ 完成 |
| 7 | 变换工具 | 3天 | 移动/缩放/旋转操作可用 | ✅ 完成 |
| 8 | 工具系统 | 2天 | 工具切换可用（选择/形状/文字等） | ✅ 完成 |
| 9 | 文字元素 | 2天 | 文字渲染和编辑可用 | ✅ 完成 |
| 10 | 图片元素 | 1天 | 图片导入/渲染可用 | ✅ 完成 |
| 11 | 图层管理 | 1天 | 图层排序 UI 可用 | 待开始 |
| 12 | 对齐与分布 | 1天 | 对齐/分布功能可用 | 待开始 |
| 13 | 复制粘贴 | 1天 | Ctrl+C/V 可用 | 待开始 |
| 14 | 集成测试与优化 | 2天 | 完整功能可用，性能达标 | 待开始 |

**总计**：约 26 天（4 周 + buffer）

### 配套文章输出节点

| 文章 | 标题 | 输出时机 | 依赖 Step | 状态 |
|------|------|----------|-----------|------|
| 1 | 《架构设计与技术选型》 | Step 4 完成后 | Step 1-4 | ✅ 已输出 |
| 2 | 《渲染引擎核心实现》 | Step 7 完成后 | Step 3, 5, 7 | ✅ 已输出 |
| 3 | 《交互系统设计》 | Step 14 完成后 | Step 6, 7, 12 | 待输出 |

### 验收详情

#### Step 1: 项目基础搭建 ✅
```
验收检查：
[x] pnpm install 成功
[x] pnpm dev 启动开发服务器
[x] pnpm build 构建成功
[x] pnpm lint 无错误
[x] pnpm type-check 无错误
[x] 浏览器可见基础页面
```

#### Step 2: 核心数据结构与命令系统 ✅
```
验收检查：
[x] Element 类型定义完整
[x] Scene CRUD 操作可用
[x] Command 接口定义
[x] CommandHistory 撤销/重做可用
[x] 基础命令（Add/Remove/Update）实现
[x] BatchCommand 批量命令可用
[x] 45 个单元测试通过
[x] 类型检查通过
```

#### Step 3: 渲染引擎与视口控制
```
验收检查：
[ ] Canvas 初始化成功
[ ] 基础形状可渲染（测试用矩形）
[ ] 滚轮缩放可用（以鼠标为中心）
[ ] 拖拽平移可用（空格+拖拽 或 中键）
[ ] 缩放限制生效（0.1 - 10）
[ ] 渲染 60fps，无卡顿
[ ] 坐标转换正确（屏幕↔画布）
```

#### Step 4: Editor 主类与状态管理
```
验收检查：
[ ] Editor 类整合所有模块
[ ] Editor 初始化/销毁正常
[ ] Zustand store 可用
[ ] React Provider/Hook 可用
[ ] 组件可响应状态变化
```

#### Step 5: 基础元素渲染
```
验收检查：
[ ] 矩形渲染（填充/描边/圆角）
[ ] 圆形/椭圆渲染
[ ] 元素变换正确（位置/大小/旋转）
[ ] 元素按图层顺序渲染
```

#### Step 6: 选择与高亮
```
验收检查：
[ ] 点击选择单个元素
[ ] 框选多个元素
[ ] Shift 多选
[ ] 选中元素显示高亮边框
[ ] 点击空白取消选择
```

#### Step 7: 变换工具
```
验收检查：
[ ] 拖拽移动元素
[ ] 手柄缩放元素（等比/自由）
[ ] 手柄旋转元素
[ ] 变换过程显示辅助线
[ ] 变换可撤销/重做
```

#### Step 8: 文字元素
```
验收检查：
[ ] 文字正确渲染
[ ] 双击进入编辑模式
[ ] 字体/字号/颜色可设置
[ ] 文字可选择/变换
```

#### Step 9: 图片元素
```
验收检查：
[ ] 支持拖拽导入图片
[ ] 支持粘贴图片
[ ] 图片正确渲染
[ ] 图片可选择/变换
```

#### Step 10: 图层管理
```
验收检查：
[ ] 图层面板显示元素列表
[ ] 拖拽调整图层顺序
[ ] 右键上移/下移/置顶/置底
[ ] 图层操作可撤销/重做
```

#### Step 11: 对齐与分布
```
验收检查：
[ ] 左/中/右对齐
[ ] 上/中/下对齐
[ ] 水平/垂直分布
[ ] 快捷键可用
```

#### Step 12: 工具系统
```
验收检查：
[ ] 工具栏 UI 可用
[ ] 选择工具（V）
[ ] 矩形工具（R）
[ ] 圆形工具（O）
[ ] 文字工具（T）
[ ] 快捷键切换
```

#### Step 13: 复制粘贴
```
验收检查：
[ ] Ctrl+C 复制
[ ] Ctrl+V 粘贴（偏移位置）
[ ] Ctrl+D 原位复制
[ ] 跨画布复制粘贴（可选）
```

#### Step 14: 集成测试与优化
```
验收检查：
[ ] 所有功能联合测试通过
[ ] 100 个元素场景流畅
[ ] 无内存泄漏
[ ] 无明显 bug
[ ] Demo 可演示
```

---

## Phase 2: 多模态元素（Week 5-8）

**目标**：支持视频、音频、网页、矢量路径等多模态内容。

### Step 分解（待细化）

| Step | 名称 | 时间 | 验收标准 | 状态 |
|------|------|------|----------|------|
| 1 | 视频元素 | 3天 | 视频预览、Seek、时间轴 | 待开始 |
| 2 | 音频元素 | 2天 | 波形显示、播放控制 | 待开始 |
| 3 | 网页嵌入 | 2天 | iframe 嵌入、截图 | 待开始 |
| 4 | 矢量路径基础 | 3天 | 贝塞尔路径、控制点编辑 | 待开始 |
| 5 | 自由绘制 | 2天 | 手绘工具、平滑算法 | 待开始 |
| 6 | 富文本编辑 | 3天 | 加粗/斜体/颜色/链接 | 待开始 |
| 7 | 组合与嵌套 | 2天 | Group/Ungroup、嵌套变换 | 待开始 |
| 8 | 优化与测试 | 2天 | 性能优化、bug 修复 | 待开始 |

### 配套文章输出节点

| 文章 | 标题 | 输出时机 | 依赖 Step |
|------|------|----------|-----------|
| 4 | 《视频元素：从渲染到交互》 | Step 1 完成后 | Phase 2 Step 1 |
| 5 | 《嵌入网页内容的技术方案》 | Step 3 完成后 | Phase 2 Step 3 |
| 6 | 《矢量路径编辑的实现》 | Step 5 完成后 | Phase 2 Step 4, 5 |

---

## Phase 3: AI Agent 集成（Week 9-14）

**目标**：接入 AI Agent，实现自然语言操作和多模态理解。

### Step 分解（待细化）

| Step | 名称 | 时间 | 验收标准 | 状态 |
|------|------|------|----------|------|
| 1 | Agent 服务架构 | 3天 | 后端 API 可用 | 待开始 |
| 2 | 自然语言解析 | 4天 | 文本 → 操作指令 | 待开始 |
| 3 | 空间指代理解 | 3天 | "右边那个"、"红色的" | 待开始 |
| 4 | 画布操作执行 | 3天 | Agent 执行编辑操作 | 待开始 |
| 5 | 图片内容分析 | 3天 | 图片理解、描述生成 | 待开始 |
| 6 | 视频内容分析 | 3天 | 关键帧提取、摘要 | 待开始 |
| 7 | AI 内容生成 | 4天 | 文生图、自动插入 | 待开始 |
| 8 | 对话式迭代 | 3天 | 上下文保持、连续对话 | 待开始 |
| 9 | 优化与测试 | 3天 | 性能优化、边界处理 | 待开始 |

### 配套文章输出节点

| 文章 | 标题 | 输出时机 | 依赖 Step |
|------|------|----------|-----------|
| 7 | 《为编辑器构建 AI Agent》 | Step 2 完成后 | Phase 3 Step 1, 2 |
| 8 | 《自然语言操作画布的实现》 | Step 4 完成后 | Phase 3 Step 2, 3, 4 |
| 9 | 《多模态 AI 在编辑器中的应用》 | Step 6 完成后 | Phase 3 Step 5, 6 |
| 10 | 《AI 生成内容与编辑器的融合》 | Step 9 完成后 | Phase 3 Step 7, 8 |

---

## Phase 4: 实时协同（Week 15-20）

**目标**：实现多人实时编辑和视频对话集成。

### Step 分解（待细化）

| Step | 名称 | 时间 | 验收标准 | 状态 |
|------|------|------|----------|------|
| 1 | Yjs 集成 | 3天 | CRDT 数据结构、同步 | 待开始 |
| 2 | 协同服务端 | 3天 | WebSocket 服务、房间管理 | 待开始 |
| 3 | 多人光标 | 2天 | 显示他人光标、选区 | 待开始 |
| 4 | 冲突解决 | 3天 | 并发编辑、自动合并 | 待开始 |
| 5 | 评论标注 | 3天 | 评论气泡、讨论线程 | 待开始 |
| 6 | 离线编辑 | 3天 | 断网可用、重连同步 | 待开始 |
| 7 | 视频通话集成 | 4天 | WebRTC、音视频流 | 待开始 |
| 8 | 语音指令 | 3天 | 语音识别、AI 响应 | 待开始 |
| 9 | 优化与测试 | 3天 | 延迟优化、稳定性 | 待开始 |

### 配套文章输出节点

| 文章 | 标题 | 输出时机 | 依赖 Step |
|------|------|----------|-----------|
| 11 | 《协同编辑的核心原理与实践》 | Step 4 完成后 | Phase 4 Step 1-4 |
| 12 | 《多人编辑的用户体验设计》 | Step 6 完成后 | Phase 4 Step 3, 5, 6 |
| 13 | 《视频对话与 WebRTC 集成》 | Step 9 完成后 | Phase 4 Step 7, 8 |

---

## Phase 5: 打磨与发布（Week 21-24）

**目标**：性能优化、功能完善、正式开源发布。

### Step 分解（待细化）

| Step | 名称 | 时间 | 验收标准 | 状态 |
|------|------|------|----------|------|
| 1 | 大文档性能优化 | 4天 | 1000 元素流畅 | 待开始 |
| 2 | 导出功能 | 3天 | 图片/PDF/视频导出 | 待开始 |
| 3 | 插件系统 | 3天 | 插件 API、示例插件 | 待开始 |
| 4 | 完整文档 | 3天 | API 文档、教程 | 待开始 |
| 5 | npm 发布 | 2天 | 包发布、版本管理 | 待开始 |
| 6 | Demo 站点 | 3天 | 在线演示、showcase | 待开始 |
| 7 | v1.0 发布 | 2天 | 公告、社区推广 | 待开始 |

### 配套文章输出节点

| 文章 | 标题 | 输出时机 | 依赖 Step |
|------|------|----------|-----------|
| 14 | 《编辑器性能优化实战》 | Step 1 完成后 | Phase 5 Step 1 |
| 15 | 《开源项目发布指南》 | Step 7 完成后 | Phase 5 全部 |

---

## 总览

| Phase | 周期 | Step 数量 | 配套文章 |
|-------|------|-----------|----------|
| Phase 1 | Week 1-4 | 14 | 3 |
| Phase 2 | Week 5-8 | 8 | 3 |
| Phase 3 | Week 9-14 | 9 | 4 |
| Phase 4 | Week 15-20 | 9 | 3 |
| Phase 5 | Week 21-24 | 7 | 2 |
| **总计** | **24 周** | **47 Step** | **15 篇** |

---

## 文章输出时间线

```
Week 2:  文章 1《架构设计与技术选型》
Week 3:  文章 2《渲染引擎核心实现》
Week 4:  文章 3《交互系统设计》
Week 6:  文章 4《视频元素：从渲染到交互》
Week 7:  文章 5《嵌入网页内容的技术方案》
Week 8:  文章 6《矢量路径编辑的实现》
Week 10: 文章 7《为编辑器构建 AI Agent》
Week 12: 文章 8《自然语言操作画布的实现》
Week 13: 文章 9《多模态 AI 在编辑器中的应用》
Week 14: 文章 10《AI 生成内容与编辑器的融合》
Week 16: 文章 11《协同编辑的核心原理与实践》
Week 18: 文章 12《多人编辑的用户体验设计》
Week 20: 文章 13《视频对话与 WebRTC 集成》
Week 22: 文章 14《编辑器性能优化实战》
Week 24: 文章 15《开源项目发布指南》
```

---

*最后更新：2025年1月*

